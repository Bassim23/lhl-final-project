<!---

<p id="notice"><%= notice %></p>

<h1>Trip <%= @trip.id%></h1>

<table class ="table">
 <thead class="thead-default">
    <tr >
      <th>
        Trip Name
      </th>
      <th>
        Trip Summary
      </th>
      <th>
        Trip Kind
      </th>
      <th>
        Host First Name
      </th>
      <th>
        Host Last Name
      </th>
      <th>
        Trip Delete Link
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <%= @trip.name%>
      </td>
      <td>
        <%= @trip.summary%>
      </td>
      <td>
        <%= @trip.kind%>
      </td>
      <td>
        <%= @trip.user.first_name%>
      </td>
      <td>
        <%= @trip.user.last_name%>
      </td>
      <td>
        <%= link_to 'Destroy', @trip, method: :delete, data: { confirm: 'Are you sure?' } %>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Schedule ID</th>
      <th>Schedule Date</th>
      <th>Goggle Place Destination</th>
      <th>Schedule Show Link</th>
      <th>Schedule Delete Link</th>
    </tr>
  </thead>
  <tbody>
    <% @trip.schedules.each do |schedule| %>
    <tr>
      <td><%= schedule.id %></td>
      <td><%= schedule.date %></td>
      <td><%= schedule.destination %></td>
      <td><%= link_to 'Show', [@trip, schedule] %></td>
      <td><%= link_to 'Destroy', [@trip, schedule], method: :delete, data: { confirm: 'Are you sure?' } %>
    <tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'Trips', trips_path %>

-->

<main class="container-fluid">
  <header class="page-header">
    <h1><%= @trip.name %></h1>
  </header>
  <section class="container col-md-4">
    <div id="agendaDay-view">
      <div id="calendar"></div>
    </div>
    <script>
      $(() => {
        $('#calendar').fullCalendar({
          height: 'auto',
          defaultView: 'agendaDay',
          allDaySlot: false,
          allDayText: false,
          slotEventOverlap: false,
          defaultDate: '2017-4-21',
          editable: true,
          droppable: true,
          scrollTime: '06:00:00'
        });
      });
    </script>
  </section>
  <!--
  <section class="container">
    <% api_key = 'AIzaSyA7GEO6ZSaCShhm7K1Jg5PG-KtUA3StVpQ' %>
    <% google_place_url = 'https://crossorigin.me/https://maps.googleapis.com/maps/api/place/textsearch/json?' %>
    <% query = 'query=poi+in' %>
    <% @trip.schedules.each do |schedule| %>
      <% query = query + schedule.destination %>
      <% complete_url = google_place_url + query + '&key=' + api_key %>
      <%= complete_url %>
    <% end %>
  </section>
  -->

  <!--
 <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3yCuJtptjR5ToKEdsPqHvPnlQXcLMTRk&callback=initMap" type="text/javascript"></script>
  <script type="text/javascript">

    function initialize() {
      var map = new google.maps.Map(document.getElementById('map-canvas'), {
          center: new google.maps.LatLng(-33.8665433, 151.1956316),
          zoom: 15
      });

      var request = {
          placeId: 'ChIJN1t_tDeuEmsRUsoyG83frY4'
      };

      var infowindow = new google.maps.InfoWindow();
      var service = new google.maps.places.PlacesService(map);

      service.getDetails(request, function (place, status) {

          if (status == google.maps.places.PlacesServiceStatus.OK) {

              var marker = new google.maps.Marker({
                  map: map,
                  position: place.geometry.location
              });

              google.maps.event.addListener(marker, 'click', function () {
                  infowindow.setContent(place.name);
                  infowindow.open(map, this);
              });
          }
      });
    }
    console.log('testing');
    google.maps.event.addDomListener(window, 'load', initialize);
  </script>

  <div id="map-container">
    <div id="map-canvas"></div>
  </div>
  -->
  <section class="container col-md-8">
    <div id="map"></div>
    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 8
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3yCuJtptjR5ToKEdsPqHvPnlQXcLMTRk&callback=initMap" async defer></script>
  </section>
</main>
